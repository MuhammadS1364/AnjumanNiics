<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Program Info Collector Form</title>
  <style>
    .error_Box {
      display: none;
      color: red;
      margin-bottom: 10px;
    }
    /* Base Reset */
/* Base Reset */
/* Base Reset */
/* Base Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", Arial, sans-serif;
}

body {
  background: #f9fafc;
  color: #333;
  line-height: 1.5;
  padding: 15px;
}

.container {
  max-width: 900px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  color: #2c3e50;
}

.error_Box {
  display: none;
  background: #ffe6e6;
  color: #d9534f;
  padding: 10px;
  border-radius: 5px;
  margin-bottom: 15px;
  font-size: 0.9rem;
}

/* Form Layout */
form .row {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 15px;
}

.input_Box, .Select-options, .POSTER, .first, .second, .third {
  flex: 1;
  min-width: 250px;
}

label {
  display: block;
  margin-bottom: 6px;
  font-weight: 600;
}

input, select, textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

input:focus, select:focus, textarea:focus {
  border-color: #0078d7;
  outline: none;
}

textarea {
  resize: vertical;
}

button {
  width: 100%;
  padding: 12px;
  background: #0078d7;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background 0.3s;
}

button:hover {
  background: #005fa3;
}

button:disabled {
  background: #ccc;
  cursor: not-allowed;
}

/* ðŸ“± Mobile Responsiveness */
@media (max-width: 768px) {
  form .row {
    flex-direction: column;   /* âœ… stack vertically */
  }
  .input_Box, .Select-options, .POSTER, .first, .second, .third {
    min-width: 100%;          /* âœ… full width */
  }
}

@media (max-width: 480px) {
  body {
    padding: 10px;
  }
  .container {
    padding: 15px;
  }
  h1 {
    font-size: 1.4rem;
  }
  button {
    font-size: 1rem;
    padding: 10px;
  }
}

  </style>
</head>
<body>
<div class="container">
  <h1>Program Info Collector Form</h1>
  <div class="error_Box"></div>

  <form action="https://sheetdb.io/api/v1/yqs1gvngfhnfs" method="post" id="sheetdb-form" enctype="multipart/form-data">
    <div class="row">
      <div class="input_Box">
        <label for="Pro_Date">Program Date</label>
        <input type="date" name="data[Date]" id="Pro_Date" required>
      </div>

      <div class="input_Box">
        <label for="Pro_Name">Program Name</label>
        <input type="text" name="data[Pragrame Name]" id="Pro_Name" placeholder="Program Name..." required>
      </div>
    </div>

    <div class="row">
      <div class="Select-options">
        <label for="Wing">Your Wing</label>
        <select name="data[Wing_Name]" id="Wing" required>
          <option value="" disabled selected>Select Your Wing</option>
          <option value="Tech Wing">Tech Wing</option>
          <option value="Urdu Wing">Urdu Wing</option>
          <option value="Arabic Wing">Arabic Wing</option>
          <option value="English Wing">English Wing</option>
          <option value="Math & Science Wing">Math & Science Wing</option>
          <option value="General Knowledge Wing">General Knowledge Wing</option>
          <option value="Tazkiya Wing">Tazkiya Wing</option>
          <option value="Sport Club">Sport Club</option>
        </select>
      </div>

      <div class="POSTER">
        <label for="Poster">Program Poster</label>
        <input type="file" name="data[poster]" id="Poster">
      </div>
    </div>

    <div class="row">
      <div class="first">
        <label for="firstHolder">First Holder</label>
        <input type="text" name="data[First Holder]" id="firstHolder">

        <label for="firstClass">First Holder Class</label>
        <select name="data[First Holder Class]" id="firstClass">
          <option value="" disabled selected>Select Class</option>
          <option value="U1">U1</option>
          <option value="U2">U2</option>
          <option value="U3">U3</option>
          <option value="U4">U4</option>
          <option value="U5">U5</option>
          <option value="U6">U6</option>
          <option value="U7">U7</option>
        </select>
      </div>

      <div class="second">
        <label for="secondHolder">second Holder</label>
        <input type="text" name="data[second Holder]" id="secondHolder">

        <label for="secondClass">second Holder Class</label>
        <select name="data[second Holder Class]" id="secondClass">
          <option value="" disabled selected>Select Class</option>
          <option value="U1">U1</option>
          <option value="U2">U2</option>
          <option value="U3">U3</option>
          <option value="U4">U4</option>
          <option value="U5">U5</option>
          <option value="U6">U6</option>
          <option value="U7">U7</option>
        </select>
      </div>

      <div class="third">
        <label for="thirdHolder">third Holder</label>
        <input type="text" name="data[third Holder]" id="thirdHolder">

        <label for="thirdClass">third Holder Class</label>
        <select name="data[third Holder Class]" id="thirdClass">
          <option value="" disabled selected>Select Class</option>
          <option value="U1">U1</option>
          <option value="U2">U2</option>
          <option value="U3">U3</option>
          <option value="U4">U4</option>
          <option value="U5">U5</option>
          <option value="U6">U6</option>
          <option value="U7">U7</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="input_Box">
        <label for="Pro_Dic">Program Description</label>
        <textarea name="data[Programe Discription]" id="Pro_Dic" cols="30" rows="10" placeholder="Program Description..." required></textarea>
      </div>
    </div>

    <button type="submit">Save Report</button>
  </form>
</div>

<script>
const MyForm = document.querySelector("#sheetdb-form");
const ErrorBox = document.querySelector('.error_Box');
const All_Form_Fields = document.querySelectorAll('input, select, textarea');
const Programe_Date_Input = document.querySelector('#Pro_Date');

const showError = (message) => {
  ErrorBox.innerHTML = `<p>${message}</p>`;
  ErrorBox.style.display = 'block';
};

const hideError = () => {
  ErrorBox.style.display = 'none';
};

All_Form_Fields.forEach((field) => {
  field.addEventListener("input", hideError);
  field.addEventListener("change", hideError);
});

MyForm.addEventListener("submit", (event) => {
  event.preventDefault();
  let isValid = true;

  All_Form_Fields.forEach((field) => {
    if (field.hasAttribute("required") && !field.value.trim()) {
      isValid = false;
    }
  });

  if (!isValid) {
    showError("Please fill all required fields (Program Name, Date, Wing, Description).");
    return;
  }

  // Date validation: must not be in the future
  const today = new Date();
  const selectedDate = new Date(Programe_Date_Input.value);
  if (selectedDate > today) {
    showError("Program date cannot be in the future.");
    return;
  }

  const Submit_Btn = MyForm.querySelector("button[type='submit']");
  Submit_Btn.disabled = true;
  Submit_Btn.textContent = 'Saving...';

  fetch(MyForm.action, {
    method: "POST",
    body: new FormData(MyForm),
  })
  .then(response => {
    if (!response.ok) throw new Error('Network response was not ok');
    return response.json();
  })
  .then(() => {
    alert('Report Saved Successfully!');
    MyForm.reset();
    hideError();
  })
  .catch((error) => {
    console.error('Submission Error:', error);
    showError("Submission Failed! Please check your network or API link.");
  })
  .finally(() => {
    Submit_Btn.disabled = false;
    Submit_Btn.textContent = 'Save Report';
  });
});
</script>
</body>
</html>
